# 리더 모듈

[English README](README.md)

이 디렉터리에는 Boost.Interprocess를 사용한 공유 메모리 리더의 구현이 포함되어 있습니다. 리더는 기존의 공유 메모리 세그먼트(라이터가 생성)를 연결하고, 동기화된 안전한 방식으로 데이터를 읽는 역할을 합니다.

## 파일
- `reader.cpp`: Boost.Interprocess를 사용하여 공유 메모리에 연결하고 데이터를 읽는 방법을 보여주는 주요 소스 파일입니다.

## 주요 기능
- 기존 공유 메모리 세그먼트에 연결
- 라이터 프로세스가 기록한 데이터 읽기 및 표시
- 안전하고 동기화된 접근을 위한 interprocess mutex 및 condition variable 사용
- 신호 처리를 통한 정상 종료 지원

## 사용법
이 모듈은 일반적으로 공유 메모리를 생성하고 데이터를 기록하는 writer 모듈과 함께 사용됩니다. reader를 빌드하고 실행하려면:

1. 시스템에 Boost가 설치되어 있는지 확인하세요.
2. CMake를 사용해 프로젝트를 빌드하세요:
   ```sh
   cd reader
   cmake .
   cmake --build .
   ```

3. reader 실행 파일을 실행하세요:
   ```sh
   ./reader
   ```

### 한 번만 읽고 종료하기

reader 실행 파일은 `--once` 인자를 지원합니다. 이 옵션을 사용하면 공유 메모리 세그먼트를 한 번만 읽고 프로그램이 종료됩니다. 스크립트에서 사용하거나, 지속적으로 모니터링하지 않고 최신 메시지만 가져오고 싶을 때 유용합니다. 사용 예시는 다음과 같습니다:

```sh
./reader --once
```
프로그램은 공유 메모리에 연결하여 현재 메시지를 읽고 표시한 뒤 종료됩니다.

기본적으로(`--once` 없이) reader는 새로운 메시지가 도착할 때마다 계속 모니터링하고 표시합니다.
